# A0139509X
###### \java\seedu\address\logic\commands\FindCommand.java
``` java
	public static final String COMMAND_WORD = "find";

	public static final String MESSAGE_USAGE = COMMAND_WORD + ": Finds all tasks whose names/description/tags contain any of "
			+ "the specified keywords (case-sensitive) and displays them as a list with index numbers.\n"
			+ "When prefix (#) is used, will display all task with the associated status or priority level.\n"
			+ "When prefix (@) is used, will display all archived task with the associated names/descriptions/tags.\n"
			+ "(Usage 1) Parameters: KEYWORD [MORE_KEYWORDS]...\n" + "Example: " + COMMAND_WORD + " study meeting friend\n"
			+ "(Usage 2) Parameters: #KEYWORD \n" + "Example: " + COMMAND_WORD + " #h\n"
			+ "(Usage 3) Parameters: @KEYWORD \n" + "Example: " + COMMAND_WORD + " @study\n";

	private final Set<String> keywords;

	private final Status status;

	private final Priority priority;

	private final String archive;

	public FindCommand(Set<String> keywords) {
		this.keywords = keywords;
		this.status = null;
		this.priority = null;
		this.archive = null;
	}

	public FindCommand(String keyword) {
		this.keywords = null;
		this.status = null;
		this.priority = null;
		this.archive = keyword;
	}

	public FindCommand(Status status) {
		this.keywords = null;
		this.status = status;
		this.priority = null;
		this.archive = null;
	}

	public FindCommand(Priority priority) {
		this.keywords = null;
		this.status = null;
		this.priority = priority;
		this.archive = null;
	}

	@Override
	public CommandResult execute() {
		if (this.keywords != null) {
			updateByKeywords();
		} else if (this.status != null) {
			updateByStatusLevel(status);
		} else if (this.priority != null) {
			updateByPriorityLevel(priority);
		} else if (this.archive != null) {
			updateByArchivedKeyword();
		}
		return new CommandResult(getMessageForTaskListShownSummary(model.getFilteredTaskList().size()));
	}

	public void updateByArchivedKeyword() {
		model.updateArchivedFilteredTaskListByKeyword(archive);
	}

	public void updateByKeywords() {
		model.updateFilteredTaskListByKeywords(keywords);
	}

	private void updateByStatusLevel(Status status) {
		if (this.status.toString().equals(TaskStringReference.STATUS_DONE)) {
			model.updateFilteredTaskListByDoneStatus();
		} else if (this.status.toString().equals(TaskStringReference.STATUS_UNDONE)) {
			model.updateFilteredTaskListByUnDoneStatus();
		} else {
			Assert.fail("unable to execute FindCommand due to incorrect Status");
		}
	}

	private void updateByPriorityLevel(Priority priority) {
		if (this.priority.toString().equals(TaskStringReference.PRIORITY_HIGH)) {
			model.updateFilteredTaskListByHighPriority();
		} else if (this.priority.toString().equals(TaskStringReference.PRIORITY_MEDIUM)) {
			model.updateFilteredTaskListByMediumPriority();
		} else if (this.priority.toString().equals(TaskStringReference.PRIORITY_LOW)) {
			model.updateFilteredTaskListByLowPriority();
		} else {
			Assert.fail("unable to execute FindCommand due to incorrect Priority");
		}
	}

}
```
###### \java\seedu\address\logic\commands\ToggleCommand.java
``` java
import seedu.address.logic.commands.exceptions.CommandException;
import seedu.address.model.Task.TaskStringReference;

public class ToggleCommand extends Command{

	public static final String COMMAND_WORD = "toggle";
	
	public static final String MESSAGE_USAGE = COMMAND_WORD;
	
	public static final String TOGGLE_MESSAGE = "Toggled to list ";

	public static final String TOGGLE_FAILED_MESSAGE = "Unable to execute toggle due to invalid current toggle status";

	private String currentToggleStatus;
	
	@Override
	public CommandResult execute() throws CommandException {
		
		currentToggleStatus = model.getCurrentToggleStatus();

		if(currentToggleStatus.equals(TaskStringReference.SHOWING_ALL)){
			model.updateFilteredTaskListByEvent();
		}
		else if(currentToggleStatus.equals(TaskStringReference.SHOWING_EVENT)){
			model.updateFilteredTaskListByTask();
		}
		else if(currentToggleStatus.equals(TaskStringReference.SHOWING_TASK)){
			model.updateFilteredTaskListByFloatingTask();
		}
		else if(currentToggleStatus.equals(TaskStringReference.SHOWING_FLOATING_TASK)){	
			model.updateFilteredListToShowAll();
		}
		else if(currentToggleStatus.equals(TaskStringReference.SHOWING_SPECIAL)){
			model.updateFilteredListToShowAll();
			return new CommandResult(getMessageForTaskListShownSummary(model.getFilteredTaskList().size()));
		}
		else {
			Assert.fail(TOGGLE_FAILED_MESSAGE);
			
		}
		
		return new CommandResult(TOGGLE_MESSAGE + model.getCurrentToggleStatus() + "\n" + 
				getMessageForTaskListShownSummary(model.getFilteredTaskList().size()));
	}

}
```
###### \java\seedu\address\logic\parser\FindCommandParser.java
``` java
	private static final char PREFIX_HASHTAG = '#';
	private static final char PREFIX_AT = '@';

```
###### \java\seedu\address\logic\parser\FindCommandParser.java
``` java
	/**
	 * Parses the given {@code String} of arguments in the context of the
	 * FindCommand and returns an FindCommand object for execution.
	 * 
	 * @throws IllegalValueException
	 */
	public Command parse(String args) {
		final Matcher matcher = KEYWORDS_ARGS_FORMAT.matcher(args.trim());
		if (!matcher.matches()) {
			return new IncorrectCommand(String.format(MESSAGE_INVALID_COMMAND_FORMAT, FindCommand.MESSAGE_USAGE));
		}

		// keywords delimited by whitespace
		final String[] keywords = matcher.group("keywords").split("\\s+");

		try {
				if (keywords[0].charAt(0) == PREFIX_HASHTAG) {
					return returnFindCommandForHashtagPrefix(keywords[0]);
				}
			}
		catch(IllegalValueException e){
			return new IncorrectCommand(e.getMessage());
		}
		
		if (keywords[0].charAt(0) == PREFIX_AT) {
			return returnFindCommandForAtPrefix(keywords[0]);
		}
		
		final Set<String> keywordSet = new HashSet<>(Arrays.asList(keywords));
		return new FindCommand(keywordSet);
	}

	private Command returnFindCommandForAtPrefix(String keywords) {
		if (keywords.substring(1).isEmpty()) {
			return new IncorrectCommand(String.format(MESSAGE_INVALID_COMMAND_FORMAT, FindCommand.MESSAGE_USAGE));
		}
		return new FindCommand(keywords.substring(1));
	}

	private Command returnFindCommandForHashtagPrefix(String keywords) throws IllegalValueException {
		if (keywords.substring(1).isEmpty()) {
			return new IncorrectCommand(String.format(MESSAGE_INVALID_COMMAND_FORMAT, FindCommand.MESSAGE_USAGE));
		}
		if (keywords.substring(1).equalsIgnoreCase(TaskStringReference.STATUS_DONE)) {
			Status status = new Status(keywords.substring(1));
			return new FindCommand(status);
		} else if (keywords.substring(1).equalsIgnoreCase(TaskStringReference.STATUS_UNDONE)) {
			Status status = new Status(keywords.substring(1));
			return new FindCommand(status);
		} else if (keywords.substring(1).equalsIgnoreCase(TaskStringReference.PRIORITY_HIGH)) {
			Priority priority = new Priority(keywords.substring(1));
			return new FindCommand(priority);
		} else if (keywords.substring(1).equalsIgnoreCase(TaskStringReference.PRIORITY_MEDIUM)) {
			Priority priority = new Priority(keywords.substring(1));
			return new FindCommand(priority);
		} else if (keywords.substring(1).equalsIgnoreCase(TaskStringReference.PRIORITY_LOW)) {
			Priority priority = new Priority(keywords.substring(1));
			return new FindCommand(priority);
		} else {
			return new IncorrectCommand(String.format(MESSAGE_INVALID_COMMAND_FORMAT, FindCommand.MESSAGE_USAGE));
		}
	}

}
```
###### \java\seedu\address\model\Model.java
``` java
    /** Returns the current toggle status */
    String getCurrentToggleStatus();
    
    /** sets the current toggle status*/
    void setCurrentToggleStatus(String currentToggleStatus);
    
    /** Updates the filter of the filtered task list to show all tasks */
    void updateFilteredListToShowAll();

    /** Updates the filter of the filtered task list to filter by the given keywords*/
    void updateFilteredTaskListByKeywords(Set<String> keywords);

    /** Updates the filter of the filtered task list to filter by done status*/
    void updateFilteredTaskListByDoneStatus();
    
    /** Updates the filter of the filtered task list to filter by undone status*/
    void updateFilteredTaskListByUnDoneStatus();
    
    /** Updates the filter of the filtered task list to filter by low priority*/
    void updateFilteredTaskListByLowPriority();
    
    /** Updates the filter of the filtered task list to filter by priority*/
    void updateFilteredTaskListByMediumPriority();
    
    /** Updates the filter of the filtered task list to filter by high priority*/
    void updateFilteredTaskListByHighPriority();

```
###### \java\seedu\address\model\Model.java
``` java
    /** Updates the filer of the filtered task list to filter by archived and keyword*/
	void updateArchivedFilteredTaskListByKeyword(String archive);

	/* Updates the filter of the filtered task list to filter by events only*/
	void updateFilteredTaskListByEvent();

	/** Updates the filter of the filtered task list to filter by task only*/
	void updateFilteredTaskListByTask();

	/** Updates the filter of the filtered task list to filter by floating task only*/
	void updateFilteredTaskListByFloatingTask();

```
###### \java\seedu\address\model\ModelManager.java
``` java
		setCurrentToggleStatus(TaskStringReference.SHOWING_ALL);

	}
```
###### \java\seedu\address\model\ModelManager.java
``` java
		raise (new JumpToListRequestEvent(filteredTasks.indexOf(task)));
	}

```
###### \java\seedu\address\model\ModelManager.java
``` java
		raise (new JumpToListRequestEvent((filteredTaskListIndex)));
	}

```
###### \java\seedu\address\model\ModelManager.java
``` java
	public String getCurrentToggleStatus() {
		return currentToggleStatus;
	}

```
###### \java\seedu\address\model\ModelManager.java
``` java
	public void setCurrentToggleStatus(String currentToggleStatus) {
		this.currentToggleStatus = currentToggleStatus;
	}
	
```
###### \java\seedu\address\model\ModelManager.java
``` java
		setCurrentToggleStatus(TaskStringReference.SHOWING_ALL);
	}

```
###### \java\seedu\address\model\ModelManager.java
``` java
		setCurrentToggleStatus(TaskStringReference.SHOWING_SPECIAL);
	}

```
###### \java\seedu\address\model\ModelManager.java
``` java
	@Override
	public void updateFilteredTaskListByEvent() {
		filteredTasks.setPredicate(task -> {
			if ((!(task.getStartTime().startTime.equals(TaskStringReference.EMPTY_TIME)) 
					&& !(task.getEndTime().endTime.equals(TaskStringReference.EMPTY_TIME))
					&& (task.getStatus().toString().equals(TaskStringReference.STATUS_UNDONE)))) {
				return true;
			} else {
				return false;
			}
		});
		setCurrentToggleStatus(TaskStringReference.SHOWING_EVENT);
	}
	
	@Override
	public void updateFilteredTaskListByTask() {
		filteredTasks.setPredicate(task -> {
			if (((task.getStartTime().startTime.equals(TaskStringReference.EMPTY_TIME)) 
					&& !(task.getEndTime().endTime.equals(TaskStringReference.EMPTY_TIME))
					&& (task.getStatus().toString().equals(TaskStringReference.STATUS_UNDONE)))) {
				return true;
			} else {
				return false;
			}
		});
		setCurrentToggleStatus(TaskStringReference.SHOWING_TASK);
		
	}
	
	@Override
	public void updateFilteredTaskListByFloatingTask() {
		filteredTasks.setPredicate(task -> {
			if (((task.getStartTime().startTime.equals(TaskStringReference.EMPTY_TIME)) 
					&& (task.getEndTime().endTime.equals(TaskStringReference.EMPTY_TIME))
					&& (task.getStatus().toString().equals((TaskStringReference.STATUS_UNDONE))))) {
				return true;
			} else {
				return false;
			}
		});
		setCurrentToggleStatus(TaskStringReference.SHOWING_FLOATING_TASK);
		
	}
	
	@Override
	public void updateFilteredTaskListByHighPriority() {
		filteredTasks.setPredicate(task -> {
			if ((task.getPriority().toString().equals(TaskStringReference.PRIORITY_HIGH)) 
					&& (task.getStatus().toString().equals(TaskStringReference.STATUS_UNDONE))) {
				return true;
			} else {
				return false;
			}
		});
		setCurrentToggleStatus(TaskStringReference.SHOWING_SPECIAL);
	}

	@Override
	public void updateFilteredTaskListByMediumPriority() {
		filteredTasks.setPredicate(task -> {
			if ((task.getPriority().toString().equals(TaskStringReference.PRIORITY_MEDIUM)) 
					&& (task.getStatus().toString().equals(TaskStringReference.STATUS_UNDONE))) {
				return true;
			} else {
				return false;
			}
		});
		setCurrentToggleStatus(TaskStringReference.SHOWING_SPECIAL);
	}
	
	@Override
	public void updateFilteredTaskListByLowPriority() {
		filteredTasks.setPredicate(task -> {
			if ((task.getPriority().toString().equals(TaskStringReference.PRIORITY_LOW)) 
					&& (task.getStatus().toString().equals(TaskStringReference.STATUS_UNDONE))) {
				return true;
			} else {
				return false;
			}
		});
		setCurrentToggleStatus(TaskStringReference.SHOWING_SPECIAL);
	}

	@Override
	public void updateFilteredTaskListByDoneStatus() {
		filteredTasks.setPredicate(task -> {
			if (task.getStatus().toString().equals(TaskStringReference.STATUS_DONE)) {
				return true;
			} else {
				return false;
			}
		});
		setCurrentToggleStatus(TaskStringReference.SHOWING_SPECIAL);
	}

	@Override
	public void updateFilteredTaskListByUnDoneStatus() {
		filteredTasks.setPredicate(task -> {
			if (task.getStatus().toString().equals(TaskStringReference.STATUS_UNDONE)) {
				return true;
			} else {
				return false;
			}
		});
		setCurrentToggleStatus(TaskStringReference.SHOWING_SPECIAL);
	}
	
	@Override
	public void updateArchivedFilteredTaskListByKeyword(String archive) {
		filteredTasks.setPredicate(task -> {
			if (((StringUtil.containsWordIgnoreCase(task.getName().fullName, archive))
					|| (StringUtil.containsWordIgnoreCase(task.getDescription().description, archive))
					|| (StringUtil.containsTagIgnoreCase(task.getTags(), archive)))
					&& (task.getStatus().toString().equalsIgnoreCase(TaskStringReference.STATUS_DONE)))
				return true;
			else {
				return false;
			}
		});
		setCurrentToggleStatus(TaskStringReference.SHOWING_SPECIAL);
	}
```
###### \java\seedu\address\model\ModelManager.java
``` java
		@Override
		public boolean run(ReadOnlyTask task) {
			for (String keyword : nameKeyWords) {
				if (((StringUtil.containsWordIgnoreCase(task.getName().fullName, keyword))
						|| (StringUtil.containsWordIgnoreCase(task.getDescription().description, keyword))
						|| (StringUtil.containsTagIgnoreCase(task.getTags(), keyword)))
						&& (task.getStatus().toString().equalsIgnoreCase(TaskStringReference.STATUS_UNDONE)))
					return true;
			}
			return false;

		}

		@Override
		public String toString() {
			return "name=" + String.join(", ", nameKeyWords);
		}
	}

}
```
###### \java\seedu\address\model\Task\TaskStringReference.java
``` java
public class TaskStringReference {

    public static final String PRIORITY_LOW = "l";
    public static final String PRIORITY_MEDIUM = "m";
    public static final String PRIORITY_HIGH = "h";
    public static final String SHOWING_ALL = "ALL";
    public static final String SHOWING_EVENT = "EVENT";
    public static final String SHOWING_TASK = "TASK";
    public static final String SHOWING_FLOATING_TASK = "FLOATING_TASK";
    public static final String SHOWING_SPECIAL = "OTHERS";
    public static final String STATUS_UNDONE = "undone";
    public static final String STATUS_DONE = "done";
    public static final String EMPTY_DESCRIPTION = "\n";
    public static final String EMPTY_TIME = "";
}
```
###### \java\seedu\address\ui\CommandBox.java
``` java
    public void setStyleAfterTab(Boolean success){
    	if(success){
    		setStyleToIndicateCommandSuccess();
    	} else if(!success){
    		setStyleToIndicateCommandFailure();
    	}
    }
```
###### \java\seedu\address\ui\MainWindow.java
``` java
        addKeyPressedFilters(scene);

    }
```
###### \java\seedu\address\ui\MainWindow.java
``` java
    /**
     * Listener and filter for keyboard shortcuts.
+    * Pressing letter keys focuses on the command box.
+    * Pressing TAB updates the task list shown, from event to task to floating task and to event again
     */
    private void addKeyPressedFilters(Scene scene) {
    	scene.addEventFilter(KeyEvent.KEY_PRESSED, event -> {
            KeyCode code = event.getCode();
            if (code.isLetterKey()){
                commandBox.getTextField().requestFocus();
            } 
            if (code.equals(KeyCode.TAB)) {
                toggleListView();
            }
        });
		
	}

```
###### \java\seedu\address\ui\MainWindow.java
``` java
	private void toggleListView() {
		boolean success;
		 try {
	            CommandResult commandResult = logic.execute(TOGGLE);

	            success=true;
	            commandBox.setStyleAfterTab(success);
	            // process result of the command
	            logger.info("Result: " + commandResult.feedbackToUser);
	            raise(new NewResultAvailableEvent(commandResult.feedbackToUser));

	        } catch (CommandException e) {
	        	success=false;
	        	commandBox.setStyleAfterTab(success);
	            // handle command failure
	            logger.info("Invalid command: " + TOGGLE);
	            raise(new NewResultAvailableEvent(e.getMessage()));
	        }
	}
```
###### \java\seedu\address\ui\ResultDisplay.java
``` java
    @Subscribe
    private void handleTaskPanelSelectionChangedEvent(TaskPanelSelectionChangedEvent event) {
        logger.info(LogsCenter.getEventHandlingLogMessage(event));
        displayed.setValue(event.getNewSelection().getAsText());
    }
}
```
###### \java\seedu\address\ui\TaskCard.java
``` java
        setTextForDescription(task);
        setTextForStartTime(task);
        setTextForEndTime(task);
        initTags(task);
        //setPriorityIcons(task);
        setColours(task);
    }
```
###### \java\seedu\address\ui\TaskCard.java
``` java
    private void setColours(ReadOnlyTask task) {
		if(task.getPriority().toString().equals(TaskStringReference.PRIORITY_HIGH)) {
			cardPane.setStyle(HIGH_PRIORITY_COLOR);
			//cardPane.setStyle(".label-red");
		} else if(task.getPriority().toString().equals(TaskStringReference.PRIORITY_MEDIUM)){
			cardPane.setStyle(MEDIUM_PRIORITY_COLOR);
		} else if(task.getPriority().toString().equals(TaskStringReference.PRIORITY_LOW)){
			cardPane.setStyle(LOW_PRIORITY_COLOR);
		}
		
	}

	/*private void setPriorityIcons(ReadOnlyTask task) {
		pinimage.setImage(new Image("/images/clock.png"));
	}*/

	private void setTextForEndTime(ReadOnlyTask task) {
		if(!(task.getEndTime().endTime.equals(TaskStringReference.EMPTY_TIME))){
			endTime.setText("End Time : " +task.getEndTime().endTime);
        } else if(task.getEndTime().endTime.equals(TaskStringReference.EMPTY_TIME)){
        	endTime.setManaged(false);
        }
	}

	private void setTextForStartTime(ReadOnlyTask task) {
		if(!(task.getStartTime().startTime.equals(TaskStringReference.EMPTY_TIME))){
        	startTime.setText("Start Time : " + task.getStartTime().startTime);
        } else if(task.getStartTime().startTime.equals(TaskStringReference.EMPTY_TIME)){
        	startTime.setManaged(false);
        }
	}

	private void setTextForDescription(ReadOnlyTask task) {
		if(!(task.getDescription().description.equals(TaskStringReference.EMPTY_DESCRIPTION))){
        	description.setText("Description : " + task.getDescription().description);
        } else if(task.getDescription().description.equals(TaskStringReference.EMPTY_DESCRIPTION)){
        	description.setManaged(false);
        }
	}

	private void initTags(ReadOnlyTask task) {
        task.getTags().forEach(tag -> tags.getChildren().add(new Label(tag.tagName)));
    }
}
```
